<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de Documentos - OmniERP</title>
    <link rel="stylesheet" href="/static/global.css">
    <link rel="stylesheet" href="/static/components.css">
    <link rel="stylesheet" href="/static/aaaaa-animations.css">
    <link rel="stylesheet" href="/static/assistant.css">
    <style>

        .container {
            display: grid;
            grid-template-columns: 300px 1fr 450px;
            gap: 20px;
            padding: 20px;
            height: 100vh;
        }

        /* Panel de opciones */
        .panel-opciones {
            background: white;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .panel-opciones h3 {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 15px;
            text-transform: uppercase;
            border-bottom: 2px solid #2563eb;
            padding-bottom: 10px;
        }

        .opcion-grupo {
            margin-bottom: 20px;
        }

        .opcion-grupo label {
            display: block;
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .opcion-grupo select,
        .opcion-grupo input[type="text"],
        .opcion-grupo input[type="color"],
        .opcion-grupo textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            font-family: inherit;
            font-size: 12px;
        }

        .opcion-grupo textarea {
            resize: vertical;
            min-height: 60px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
        }

        /* √Årea de vista previa */
        .preview-area {
            background: white;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .documento-preview {
            background: white;
            border: 1px solid #e5e7eb;
            padding: 40px;
            margin: 0 auto;
            max-width: 800px;
            min-height: 600px;
            font-size: 11px;
            font-family: Arial, sans-serif;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .encabezado-doc {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid currentColor;
        }

        .empresa-info h2 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .empresa-info p {
            line-height: 1.4;
            color: var(--text-secondary);
        }

        .documento-titulo {
            text-align: right;
        }

        .documento-titulo h1 {
            font-size: 24px;
            margin-bottom: 5px;
            color: var(--color-primario, var(--brand-primary));
        }

        .documento-numero {
            font-weight: bold;
            font-size: 12px;
        }

        .marco-simple {
            border: 1px solid #000;
            padding: 15px;
        }

        .marco-elegante {
            border: 2px double #2563eb;
            padding: 15px;
        }

        .marco-corporativo {
            border-left: 5px solid #2563eb;
            border-top: 2px solid #2563eb;
            padding: 15px;
        }

        .marco-moderno {
            border: none;
            background: linear-gradient(135deg, #f5f5f5 0%, #ffffff 100%);
            padding: 15px;
            border-radius: 8px;
        }

        .tabla-items {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }

        .tabla-items th {
            background: var(--color-primario, var(--brand-primary));
            color: white;
            padding: 8px;
            text-align: left;
            font-weight: bold;
        }

        .tabla-items td {
            padding: 8px;
            border-bottom: 1px solid #e5e7eb;
        }

        .tabla-items tr:hover {
            background: #f9fafb;
        }

        .totales {
            margin-top: 30px;
            text-align: right;
            width: 300px;
            margin-left: auto;
        }

        .total-fila {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .total-final {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-weight: bold;
            font-size: 13px;
            border-top: 2px solid var(--color-primario, var(--brand-primary));
        }

        .notas-pie {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
            font-size: 10px;
            color: var(--text-secondary);
        }

        /* Panel de acciones */
        .panel-acciones {
            background: white;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .btn-primary {
            background: var(--brand-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--brand-primary-dark);
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #1f2937;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .btn-success {
            background: var(--color-success);
            color: white;
        }

        .btn-success:hover {
            background: var(--color-success-dark);
        }

        .btn-danger {
            background: var(--color-danger);
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        .marco-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .marco-option {
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            font-size: 12px;
            transition: all 0.2s;
        }

        .marco-option:hover {
            border-color: var(--brand-primary);
        }

        .marco-option.activo {
            border-color: var(--brand-primary);
            background: var(--primary-light);
        }

        .hr {
            height: 1px;
            background: #e5e7eb;
            margin: 15px 0;
        }

        .info-box {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 12px;
            border-radius: 4px;
            font-size: 12px;
            color: #0c4a6e;
        }
    </style>
    <link rel="stylesheet" href="/static/modules-base.css">
    <link rel="stylesheet" href="/static/components-advanced.css">
</head>
<body>
    <link rel="stylesheet" href="/static/assistant.css">
    <div class="container">
        <!-- Panel de opciones izquierdo -->
        <div class="panel-opciones">
            <h3>Personalizaci√≥n</h3>

            <div class="opcion-grupo">
                <label>Tipo de Documento</label>
                <select id="tipoDocumento" onchange="cambiarTipoDocumento()">
                    <option value="factura">Factura</option>
                    <option value="albaran">Albar√°n</option>
                    <option value="pedido_compra">Pedido de compra</option>
                </select>
            </div>

            <div class="opcion-grupo">
                <label>Prefijo</label>
                <input type="text" id="prefijo" value="F-" onchange="actualizarPreview()" placeholder="F-, A-, etc.">
            </div>

            <div class="hr"></div>

            <h3 style="margin-top: 20px;">Colores</h3>

            <div class="opcion-grupo">
                <label>Color Primario</label>
                <input type="color" id="colorPrimario" value="#2563eb" onchange="actualizarPreview()">
            </div>

            <div class="opcion-grupo">
                <label>Color Secundario</label>
                <input type="color" id="colorSecundario" value="#64748b" onchange="actualizarPreview()">
            </div>

            <div class="hr"></div>

            <h3>Marcos</h3>
            <div class="marco-selector" id="marcoSelector">
                <div class="marco-option activo" data-marco="simple" onclick="seleccionarMarco('simple')">
                    Simple
                </div>
                <div class="marco-option" data-marco="elegante" onclick="seleccionarMarco('elegante')">
                    Elegante
                </div>
                <div class="marco-option" data-marco="corporativo" onclick="seleccionarMarco('corporativo')">
                    Corporativo
                </div>
                <div class="marco-option" data-marco="moderno" onclick="seleccionarMarco('moderno')">
                    Moderno
                </div>
            </div>

            <div class="hr"></div>

            <h3>Elementos Visuales</h3>

            <div class="checkbox-group">
                <input type="checkbox" id="mostrarLogo" checked onchange="actualizarPreview()">
                <label for="mostrarLogo">Mostrar logo</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="mostrarQR" checked onchange="actualizarPreview()">
                <label for="mostrarQR">Mostrar QR</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="mostrarCodigoBarras" onchange="actualizarPreview()">
                <label for="mostrarCodigoBarras">Mostrar c√≥digo de barras</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="mostrarFirma" checked onchange="actualizarPreview()">
                <label for="mostrarFirma">Mostrar firma</label>
            </div>

            <div class="hr"></div>

            <h3>Textos Personalizados</h3>

            <div class="opcion-grupo">
                <label>Condiciones de pago</label>
                <textarea id="condicionesPago" onchange="actualizarPreview()">Pago al contado</textarea>
            </div>

            <div class="opcion-grupo">
                <label>Notas al pie</label>
                <textarea id="notasPie" onchange="actualizarPreview()">Gracias por su compra</textarea>
            </div>
        </div>

        <!-- √Årea de vista previa central -->
        <div class="preview-area">
            <div class="documento-preview" id="preview" style="--color-primario: var(--brand-primary);">
                <div class="encabezado-doc">
                    <div class="empresa-info">
                        <h2>Mi Empresa</h2>
                        <p>RUC: 12345678901<br>
                        Lima, Per√∫<br>
                        Tel: (01) 234 5678</p>
                    </div>
                    <div class="documento-titulo">
                        <h1 id="tipoDoc">FACTURA</h1>
                        <div class="documento-numero">N√∫mero: <span id="numeroDoc">F-00001</span></div>
                        <div style="font-size: 10px; color: var(--text-tertiary); margin-top: 5px;">Fecha: 04/12/2025</div>
                    </div>
                </div>

                <div class="marco-simple" id="marcoContent">
                    <div>
                        <strong>Cliente:</strong><br>
                        Nombre Cliente<br>
                        Direcci√≥n: Av. Principal 123
                    </div>

                    <table class="tabla-items">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Cantidad</th>
                                <th>P. Unit.</th>
                                <th>Subtotal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Producto Ejemplo</td>
                                <td>2</td>
                                <td>S/ 50.00</td>
                                <td>S/ 100.00</td>
                            </tr>
                            <tr>
                                <td>Servicio Ejemplo</td>
                                <td>1</td>
                                <td>S/ 75.00</td>
                                <td>S/ 75.00</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="totales">
                        <div class="total-fila">
                            <span>Subtotal:</span>
                            <span>S/ 175.00</span>
                        </div>
                        <div class="total-fila">
                            <span>IGV (18%):</span>
                            <span>S/ 31.50</span>
                        </div>
                        <div class="total-final">
                            <span>TOTAL:</span>
                            <span>S/ 206.50</span>
                        </div>
                    </div>
                </div>

                <div class="notas-pie" id="notasPiePreview">
                    <strong>Notas:</strong> Gracias por su compra
                </div>
            </div>
        </div>

        <!-- Panel de acciones derecho -->
        <div class="panel-acciones">
            <div class="info-box">
                <strong>üí° Consejo:</strong> Personaliza tu documento y desc√°rgalo como PDF para visualizarlo completo.
            </div>

            <h3 style="margin-top: 10px;">Acciones</h3>

            <button class="btn btn-primary" onclick="descargarPDF()">
                üì• Descargar PDF
            </button>

            <button class="btn btn-secondary" onclick="limpiarCampos()">
                üîÑ Restaurar valores
            </button>

            <button class="btn btn-success" onclick="guardarPlantilla()">
                üíæ Guardar plantilla
            </button>

            <div class="hr"></div>

            <h3>Crear Documento Manual</h3>

            <button class="btn btn-primary" onclick="abrirCrearManual()">
                ‚ûï Nuevo Documento
            </button>

            <div class="hr"></div>

            <h3>Pr√©visualizaci√≥n PDF</h3>

            <div id="pdfPreview" style="width: 100%; height: 200px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 6px; display: flex; align-items: center; justify-content: center; color: var(--text-tertiary); font-size: 12px;">
                PDF Preview aqu√≠
            </div>
        </div>
    </div>

    <script>
        function cambiarTipoDocumento() {
            const tipoDoc = document.getElementById('tipoDocumento').value;
            if (tipoDoc === 'factura') {
                document.getElementById('prefijo').value = 'F-';
                document.getElementById('condicionesPago').value = 'Pago al contado';
                document.getElementById('notasPie').value = 'Gracias por su compra';
            } else if (tipoDoc === 'albaran') {
                document.getElementById('prefijo').value = 'A-';
                document.getElementById('condicionesPago').value = 'Sin pago (documento de entrega)';
                document.getElementById('notasPie').value = 'Albar√°n pendiente de firma';
            } else if (tipoDoc === 'pedido_compra') {
                document.getElementById('prefijo').value = 'PO-';
                document.getElementById('condicionesPago').value = 'Pago seg√∫n acuerdo con proveedor';
                document.getElementById('notasPie').value = 'Pedido de compra generado autom√°ticamente';
            }
            actualizarPreview();
        }

        function actualizarPreview() {
            const tipoDoc = document.getElementById('tipoDocumento').value;
            const colorPrimario = document.getElementById('colorPrimario').value;
            const colorSecundario = document.getElementById('colorSecundario').value;
            const prefijo = document.getElementById('prefijo').value;
            const notasPie = document.getElementById('notasPie').value;

            const labels = {
                factura: 'FACTURA',
                albaran: 'ALBAR√ÅN',
                pedido_compra: 'PEDIDO DE COMPRA'
            };
            document.getElementById('tipoDoc').textContent = labels[tipoDoc] || tipoDoc.toUpperCase();
            document.getElementById('numeroDoc').textContent = `${prefijo}00001`;
            document.getElementById('notasPiePreview').innerHTML = `<strong>Notas:</strong> ${notasPie}`;

            const preview = document.getElementById('preview');
            preview.style.setProperty('--color-primario', colorPrimario);
        }

        function seleccionarMarco(marco) {
            // Remover clase activa
            document.querySelectorAll('.marco-option').forEach(el => el.classList.remove('activo'));
            // Agregar clase activa
            document.querySelector(`[data-marco="${marco}"]`).classList.add('activo');

            // Cambiar clase del marco en preview
            const marcoContent = document.getElementById('marcoContent');
            marcoContent.className = '';
            marcoContent.classList.add(`marco-${marco}`);
        }

        function descargarPDF() {
            const tipoDoc = document.getElementById('tipoDocumento').value;
            alert('üîÑ Descargando ' + tipoDoc + ' como PDF...\n\nEsta funci√≥n generar√° un PDF con tu personalizaci√≥n.');
        }

        function guardarPlantilla() {
            alert('‚úÖ Plantilla guardada exitosamente');
        }

        function limpiarCampos() {
            document.getElementById('tipoDocumento').value = 'factura';
            document.getElementById('prefijo').value = 'F-';
            document.getElementById('colorPrimario').value = '#2563eb';
            document.getElementById('colorSecundario').value = '#64748b';
            document.getElementById('mostrarLogo').checked = true;
            document.getElementById('mostrarQR').checked = true;
            document.getElementById('mostrarCodigoBarras').checked = false;
            document.getElementById('mostrarFirma').checked = true;
            document.getElementById('condicionesPago').value = 'Pago al contado';
            document.getElementById('notasPie').value = 'Gracias por su compra';
            document.getElementById('tipoDocumento').value = 'factura';
            seleccionarMarco('simple');
            actualizarPreview();
        }

        function abrirCrearManual() {
            alert('Abriendo formulario para crear documento manual...');
        }

        // Inicializar preview
        actualizarPreview();
    </script>
</body>
<script defer src="/static/assistant.js"></script>
<script defer src="/static/assistant-basic-panel.js"></script>
</html>
