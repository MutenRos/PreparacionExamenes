<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuevo Proyecto | Cuestionario Maestro</title>
    <link rel="stylesheet" href="dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Manrope:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo-text">Integra Tech</div>
        </div>
        
        <nav>
            <a href="dashboard.html" class="nav-item">
                <span>üìä</span> Dashboard
            </a>
            <a href="agenda.html" class="nav-item">
                <span>ÔøΩÔøΩ</span> Agenda
            </a>
            <a href="clients.html" class="nav-item active">
                <span>üë•</span> Clientes
            </a>
            <a href="#" class="nav-item">
                <span>üöÄ</span> Proyectos
            </a>
            <a href="#" class="nav-item">
                <span>üí∞</span> Finanzas
            </a>
            <a href="#" class="nav-item">
                <span>‚öôÔ∏è</span> Configuraci√≥n
            </a>
        </nav>

        <div style="margin-top: auto;">
            <a href="index.html" class="nav-item">
                <span>‚¨ÖÔ∏è</span> Volver a Web
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- PDF Header (Hidden on screen) -->
        <div class="pdf-header" style="display: none;">
            <div class="pdf-brand">
                <div class="pdf-logo">Integra Tech</div>
                <div class="pdf-tagline">Consulting & Development</div>
            </div>
            <div class="pdf-meta">
                <h1>PROPUESTA DE PROYECTO</h1>
                <div class="meta-row">
                    <strong>Fecha:</strong> <span id="pdfDate"></span>
                </div>
                <div class="meta-row">
                    <strong>Cliente:</strong> Log√≠stica Norte S.L.
                </div>
                <div class="meta-row">
                    <strong>Ref:</strong> PRJ-2026-001
                </div>
            </div>
        </div>

        <div class="breadcrumb">
            <a href="clients.html">Clientes</a> / <a href="client-details.html">Log√≠stica Norte S.L.</a> / Nuevo Proyecto
        </div>

        <header class="page-header">
            <h1>Cuestionario Maestro & Presupuesto</h1>
            <p class="text-muted">Define el alcance y genera el presupuesto autom√°ticamente.</p>
        </header>

        <form id="budgetForm" class="budget-layout">
            <!-- Left Column: Questionnaire -->
            <div class="form-container">
                
                <!-- A. Datos Base -->
                <div class="form-section">
                    <h3>A. Datos Base del Proyecto</h3>
                    <div class="form-row">
                        <label>Nombre del Proyecto</label>
                        <input type="text" class="qty-input" style="width: 100%; text-align: left;" placeholder="Ej: Portal Clientes 2026">
                    </div>
                    <div class="form-row">
                        <label>Contacto Principal</label>
                        <input type="text" class="qty-input" style="width: 100%; text-align: left;" placeholder="Nombre, Rol, Email">
                    </div>
                    <div class="form-row">
                        <label>Decisor Final</label>
                        <input type="text" class="qty-input" style="width: 100%; text-align: left;">
                    </div>
                    <div class="form-row">
                        <label>Fecha Objetivo</label>
                        <input type="date" class="qty-input" style="width: 100%; text-align: left;">
                    </div>
                </div>

                <!-- B. Objetivos -->
                <div class="form-section">
                    <h3>B. Objetivos & √âxito</h3>
                    <div class="form-row" style="display: block;">
                        <label style="display: block; margin-bottom: 8px;">Objetivo del Proyecto (1-2 frases)</label>
                        <textarea class="qty-input" style="width: 100%; height: 80px; text-align: left;"></textarea>
                    </div>
                    <div class="form-row" style="display: block;">
                        <label style="display: block; margin-bottom: 8px;">M√©tricas de √âxito (KPIs)</label>
                        <textarea class="qty-input" style="width: 100%; height: 80px; text-align: left;"></textarea>
                    </div>
                </div>

                <!-- 1. Blueprint -->
                <div class="form-section">
                    <h3>1. Blueprint & Definici√≥n</h3>
                    <div class="form-row">
                        <label>
                            <input type="radio" name="blueprint" value="0" checked>
                            Sin Blueprint (Directo a implementaci√≥n)
                        </label>
                        <span class="price-tag">0 ‚Ç¨</span>
                    </div>
                    <div class="form-row">
                        <label>
                            <input type="radio" name="blueprint" value="450">
                            Blueprint Lite (Alcance MVP + Roadmap)
                        </label>
                        <span class="price-tag">450 ‚Ç¨</span>
                    </div>
                    <div class="form-row">
                        <label>
                            <input type="radio" name="blueprint" value="900">
                            Blueprint Standard (AS-IS/TO-BE + Pantallas)
                        </label>
                        <span class="price-tag">900 ‚Ç¨</span>
                    </div>
                    <div class="form-row">
                        <label>
                            <input type="radio" name="blueprint" value="1500">
                            Blueprint Pro (Modelo Datos + Plan Despliegue)
                        </label>
                        <span class="price-tag">1.500 ‚Ç¨</span>
                    </div>
                </div>

                <!-- 2. Web -->
                <div class="form-section">
                    <h3>2. Web Corporativa / Marketing</h3>
                    <div class="form-row">
                        <label>Tipo de Web</label>
                        <select class="qty-input" style="width: 200px;" id="webType">
                            <option value="0">Ninguna</option>
                            <option value="650">One-Page (650 ‚Ç¨)</option>
                            <option value="1200">Corporativa 5 p√°gs (1.200 ‚Ç¨)</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label>P√°ginas Adicionales (120‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="120">
                    </div>
                    <div class="form-row">
                        <label>Blog / Noticias (350‚Ç¨)</label>
                        <input type="checkbox" value="350" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Idiomas Extra (250‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="250">
                    </div>
                    <div class="form-row">
                        <label>Dise√±o UI a Medida (600‚Ç¨)</label>
                        <input type="checkbox" value="600" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Copywriting (P√°ginas) (80‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="80">
                    </div>
                    <div class="form-row">
                        <label>SEO B√°sico (250‚Ç¨)</label>
                        <input type="checkbox" value="250" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>SEO Local (450‚Ç¨)</label>
                        <input type="checkbox" value="450" class="feature-check">
                    </div>
                </div>

                <!-- 3. Portal / Backoffice -->
                <div class="form-section">
                    <h3>3. Portal & Backoffice</h3>
                    <div class="form-row">
                        <label>Portal Cliente B√°sico (900‚Ç¨)</label>
                        <input type="checkbox" value="900" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Backoffice B√°sico (1.200‚Ç¨)</label>
                        <input type="checkbox" value="1200" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Pantallas Extra (180‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="180">
                    </div>
                    <div class="form-row">
                        <label>Entidades CRUD Extra (350‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="350">
                    </div>
                    <div class="form-row">
                        <label>B√∫squeda Avanzada (180‚Ç¨/entidad)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="180">
                    </div>
                    <div class="form-row">
                        <label>Export CSV/Excel (120‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="120">
                    </div>
                    <div class="form-row">
                        <label>Import CSV (180‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="180">
                    </div>
                    <div class="form-row">
                        <label>Notif. Email (90‚Ç¨/tipo)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="90">
                    </div>
                    <div class="form-row">
                        <label>Notif. WhatsApp (120‚Ç¨/tipo)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="120">
                    </div>
                </div>

                <!-- 4. Roles & Seguridad -->
                <div class="form-section">
                    <h3>4. Roles & Seguridad</h3>
                    <div class="form-row">
                        <label>Roles Extra (90‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="90">
                    </div>
                    <div class="form-row">
                        <label>Permisos Avanzados (250‚Ç¨)</label>
                        <input type="checkbox" value="250" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Audit Log (250‚Ç¨)</label>
                        <input type="checkbox" value="250" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>2FA (180‚Ç¨)</label>
                        <input type="checkbox" value="180" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>SSO (350‚Ç¨)</label>
                        <input type="checkbox" value="350" class="feature-check">
                    </div>
                </div>

                <!-- 5. Automatizaciones -->
                <div class="form-section">
                    <h3>5. Automatizaciones</h3>
                    <div class="form-row">
                        <label>Workflows Simples (120‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="120">
                    </div>
                    <div class="form-row">
                        <label>Workflows Est√°ndar (250‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="250">
                    </div>
                    <div class="form-row">
                        <label>Workflows Complejos (450‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="450">
                    </div>
                    <div class="form-row">
                        <label>Plantillas PDF (180‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="180">
                    </div>
                    <div class="form-row">
                        <label>Firma Digital (450‚Ç¨)</label>
                        <input type="checkbox" value="450" class="feature-check">
                    </div>
                </div>

                <!-- 6. Datos -->
                <div class="form-section">
                    <h3>6. Datos & Migraci√≥n</h3>
                    <div class="form-row">
                        <label>Modelado Entidad Extra (60‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="60">
                    </div>
                    <div class="form-row">
                        <label>Migraci√≥n Simple (200‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="200">
                    </div>
                    <div class="form-row">
                        <label>Migraci√≥n con Limpieza (450‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="450">
                    </div>
                    <div class="form-row">
                        <label>Carga Docs (Bloques 500) (90‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="90">
                    </div>
                </div>

                <!-- 7. Integraciones -->
                <div class="form-section">
                    <h3>7. Integraciones</h3>
                    <div class="form-row">
                        <label>Integraci√≥n Simple (Zapier) (250‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="250">
                    </div>
                    <div class="form-row">
                        <label>API Est√°ndar (650‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="650">
                    </div>
                    <div class="form-row">
                        <label>API Compleja (1.200‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="1200">
                    </div>
                    <div class="form-row">
                        <label>Gesti√≥n Fallos/Colas (250‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="250">
                    </div>
                </div>

                <!-- 8. Infra -->
                <div class="form-section">
                    <h3>8. Infraestructura</h3>
                    <div class="form-row">
                        <label>Entornos (Dev/Test) (120‚Ç¨/u)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="120">
                    </div>
                    <div class="form-row">
                        <label>CI/CD (250‚Ç¨)</label>
                        <input type="checkbox" value="250" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Backups (180‚Ç¨)</label>
                        <input type="checkbox" value="180" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Monitorizaci√≥n (180‚Ç¨)</label>
                        <input type="checkbox" value="180" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Hardening Seguridad (250‚Ç¨)</label>
                        <input type="checkbox" value="250" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Optimizaci√≥n Rendimiento (350‚Ç¨)</label>
                        <input type="checkbox" value="350" class="feature-check">
                    </div>
                    <div class="form-row">
                        <label>Cutover Producci√≥n (350‚Ç¨)</label>
                        <input type="checkbox" value="350" class="feature-check">
                    </div>
                </div>

                <!-- 9. Formaci√≥n & Soporte -->
                <div class="form-section">
                    <h3>9. Formaci√≥n & Soporte</h3>
                    <div class="form-row">
                        <label>Horas Formaci√≥n (90‚Ç¨/h)</label>
                        <input type="number" min="0" value="0" class="qty-input" data-price="90">
                    </div>
                    <div class="form-row">
                        <label>Soporte Mensual</label>
                        <select class="qty-input" style="width: 200px;" id="supportPlan">
                            <option value="0">Ninguno</option>
                            <option value="180">B√°sico (180‚Ç¨/mes)</option>
                            <option value="480">Est√°ndar (480‚Ç¨/mes)</option>
                            <option value="900">Pro (900‚Ç¨/mes)</option>
                        </select>
                    </div>
                </div>

                <!-- 10. Plazo & Complejidad -->
                <div class="form-section">
                    <h3>10. Factores Multiplicadores</h3>
                    <div class="form-row">
                        <label>Plazo</label>
                        <select class="qty-input" style="width: 200px;" id="deadlineMult">
                            <option value="1">Normal (x1.0)</option>
                            <option value="1.2">Express (x1.2)</option>
                            <option value="1.35">Urgente (x1.35)</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label>Complejidad</label>
                        <select class="qty-input" style="width: 200px;" id="complexityMult">
                            <option value="1">Normal (x1.0)</option>
                            <option value="1.15">Alta (x1.15)</option>
                            <option value="1.3">Muy Alta (x1.3)</option>
                        </select>
                    </div>
                </div>

                <!-- 11. Gesti√≥n PM -->
                <div class="form-section">
                    <h3>11. Gesti√≥n de Proyecto</h3>
                    <div class="form-row">
                        <label>Duraci√≥n Estimada</label>
                        <select class="qty-input" style="width: 200px;" id="pmMult">
                            <option value="0">‚â§ 2 semanas (0%)</option>
                            <option value="0.08">2-6 semanas (8%)</option>
                            <option value="0.12">> 6 semanas (12%)</option>
                        </select>
                    </div>
                </div>

                <!-- Extra: Notas Finales -->
                <div class="form-section">
                    <h3>Notas & Criterios de Aceptaci√≥n</h3>
                    <div class="form-row" style="display: block;">
                        <label style="display: block; margin-bottom: 8px;">Notas Adicionales</label>
                        <textarea class="qty-input" style="width: 100%; height: 100px; text-align: left;"></textarea>
                    </div>
                </div>

            </div>

            <!-- Right Column: Sticky Summary -->
            <div class="budget-summary">
                <h3>Resumen Presupuesto</h3>
                
                <div class="budget-line">
                    <span>Blueprint</span>
                    <span id="sumBlueprint">0 ‚Ç¨</span>
                </div>
                <div class="budget-line">
                    <span>Implementaci√≥n Base</span>
                    <span id="sumImplementation">0 ‚Ç¨</span>
                </div>
                <div class="budget-line">
                    <span>Multiplicadores</span>
                    <span id="sumMultipliers">x1.00</span>
                </div>
                <div class="budget-line">
                    <span>Gesti√≥n (PM)</span>
                    <span id="sumPM">0 ‚Ç¨</span>
                </div>

                <div class="budget-total">
                    <span>TOTAL (sin IVA)</span>
                    <span class="amount" id="totalAmount">0 ‚Ç¨</span>
                </div>

                <div class="monthly-fee">
                    <span>Recurrente Mensual</span>
                    <span id="monthlyAmount">0 ‚Ç¨/mes</span>
                </div>

                <div class="action-buttons" style="display: flex; flex-direction: column; gap: 12px; margin-top: 24px;">
                    <button type="button" class="btn-primary" id="btnSave">
                        üíæ Guardar Proyecto
                    </button>
                    <button type="button" class="btn-secondary" id="btnPrint" style="background: var(--bg-card); border: 1px solid var(--border); color: var(--text-main); padding: 12px; border-radius: 8px; cursor: pointer;">
                        üñ®Ô∏è Imprimir
                    </button>
                    <button type="button" class="btn-secondary" id="btnPdf" style="background: var(--bg-card); border: 1px solid var(--border); color: var(--text-main); padding: 12px; border-radius: 8px; cursor: pointer;">
                        üì• Descargar PDF
                    </button>
                </div>
            </div>
        </form>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="budget-calculator.js"></script>
</body>
</html>
