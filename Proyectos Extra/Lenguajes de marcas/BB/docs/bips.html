<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="BIPS - Bloch Intelligent Pump Selector. Encuentra la bomba perfecta para tus necesidades de caudal y altura.">
    <title>BIPS - Selector de Bombas | Bombas Bloch</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .bips-hero {
            background: linear-gradient(135deg, var(--secondary) 0%, #d32f3e 100%);
            color: var(--white);
            padding: 60px 0;
            text-align: center;
        }
        
        .bips-hero h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 42px;
            margin-bottom: 15px;
        }
        
        .bips-hero p {
            font-size: 18px;
            opacity: 0.9;
        }
        
        .bips-container {
            padding: 60px 0;
            background: var(--gray-light);
            min-height: 60vh;
        }
        
        .bips-card {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .bips-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 20px;
            align-items: end;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-group label i {
            color: var(--primary);
            margin-right: 5px;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: help;
        }
        
        .tooltip i {
            color: var(--gray);
            font-size: 14px;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 250px;
            background: var(--dark);
            color: var(--white);
            text-align: left;
            padding: 12px;
            border-radius: var(--radius);
            position: absolute;
            z-index: 100;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 13px;
            font-weight: 400;
            line-height: 1.5;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--dark) transparent transparent transparent;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        .form-group input,
        .form-group select {
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: var(--radius);
            font-size: 16px;
            transition: var(--transition);
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 79, 139, 0.1);
        }
        
        .btn-buscar {
            background: var(--secondary);
            color: var(--white);
            border: none;
            padding: 14px 30px;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-buscar:hover {
            background: #d32f3e;
            transform: translateY(-2px);
        }
        
        .checkbox-group {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
            color: var(--gray);
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        
        /* Resultados */
        .results-section {
            margin-top: 40px;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .results-header h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 22px;
            color: var(--primary);
        }
        
        .results-count {
            background: var(--primary);
            color: var(--white);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .results-grid {
            display: grid;
            gap: 15px;
        }
        
        .result-card {
            display: grid;
            grid-template-columns: 80px 1fr auto;
            gap: 20px;
            background: var(--gray-light);
            padding: 20px;
            border-radius: var(--radius);
            align-items: center;
            transition: var(--transition);
        }
        
        .result-card:hover {
            background: #e8f4fc;
            transform: translateX(5px);
        }
        
        .result-card.aproximado {
            border-left: 4px solid var(--accent);
        }
        
        .result-icon {
            width: 60px;
            height: 60px;
            background: var(--primary);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .result-info h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .result-info .serie {
            color: var(--primary);
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 5px;
        }
        
        .result-info .specs {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            font-size: 14px;
            color: var(--gray);
        }
        
        .result-info .specs span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .result-info .aplicacion {
            font-size: 13px;
            color: var(--gray);
            margin-top: 5px;
            font-style: italic;
        }
        
        .result-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-info,
        .btn-quote {
            padding: 10px 20px;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }
        
        .btn-info {
            background: var(--primary);
            color: var(--white);
        }
        
        .btn-info:hover {
            background: var(--primary-dark);
        }
        
        .btn-quote {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
        }
        
        .btn-quote:hover {
            background: var(--secondary);
            color: var(--white);
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: var(--gray);
        }
        
        .no-results i {
            font-size: 50px;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        .aprox-badge {
            background: var(--accent);
            color: var(--white);
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .bips-form {
                grid-template-columns: 1fr;
            }
            
            .result-card {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .result-icon {
                margin: 0 auto;
            }
            
            .result-info .specs {
                justify-content: center;
            }
            
            .result-actions {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Cookie Banner -->
    <div class="cookie-banner" id="cookieBanner">
        <p>Utilizamos cookies propias y de terceros para mejorar su experiencia. <a href="politica-cookies.html">Más información</a></p>
        <button id="acceptCookies">Aceptar</button>
    </div>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container top-bar-content">
            <div class="top-contact">
                <a href="tel:+34961402144"><i class="fas fa-phone"></i> 961 402 144</a>
                <a href="mailto:info@bombasbloch.com"><i class="fas fa-envelope"></i> info@bombasbloch.com</a>
            </div>
            <div class="top-social">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-linkedin-in"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container header-content">
            <a href="index.html" class="logo">
                <span class="logo-text">BOMBAS BLOCH</span>
            </a>
            <nav class="nav">
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="conocenos.html">Conócenos</a></li>
                    <li><a href="productos.html">Productos</a></li>
                    <li><a href="servicios.html">Servicios</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="descargas.html">Descargas</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                    <li><a href="bips.html" class="nav-bips active">BIPS</a></li>
                </ul>
            </nav>
            <button class="nav-toggle" aria-label="Menú">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- BIPS Hero -->
    <section class="bips-hero">
        <div class="container">
            <h1><i class="fas fa-search"></i> BIPS</h1>
            <p>Bloch Intelligent Pump Selector - Encuentra la bomba perfecta para tu proyecto</p>
        </div>
    </section>

    <!-- BIPS Container -->
    <section class="bips-container">
        <div class="container">
            <div class="bips-card">
                <form class="bips-form" id="bipsForm">
                    <div class="form-group">
                        <label>
                            <i class="fas fa-tint"></i> Caudal (m³/h)
                            <span class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Volumen de agua que necesitas bombear por hora. Por ejemplo: riego jardín pequeño 2-4 m³/h, vivienda 4-6 m³/h, agricultura 10-50 m³/h.</span>
                            </span>
                        </label>
                        <input type="number" id="caudal" min="0" step="0.1" placeholder="Ej: 5" required>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <i class="fas fa-arrows-alt-v"></i> Altura (m)
                            <span class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Altura manométrica total. Incluye la diferencia de nivel más las pérdidas por rozamiento. Vivienda típica: 30-50m, edificio: 50-80m, pozo profundo: 80-150m.</span>
                            </span>
                        </label>
                        <input type="number" id="altura" min="0" step="1" placeholder="Ej: 40" required>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-filter"></i> Categoría</label>
                        <select id="categoria">
                            <option value="">Todas las categorías</option>
                            <option value="Horizontales Domésticas">Horizontales Domésticas</option>
                            <option value="Horizontales Industriales">Horizontales Industriales</option>
                            <option value="Verticales de Superficie">Verticales de Superficie</option>
                            <option value="Sumergibles para Pozos">Sumergibles para Pozos</option>
                            <option value="Sumergibles para Achique">Sumergibles para Achique</option>
                            <option value="Sistemas Solar">Sistemas Solar</option>
                            <option value="Equipos de Presión">Equipos de Presión</option>
                            <option value="Equipos Contra Incendios">Equipos Contra Incendios</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn-buscar">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                    
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="aproximados">
                            Mostrar resultados aproximados si no hay coincidencia exacta
                        </label>
                    </div>
                </form>
                
                <!-- Resultados -->
                <div class="results-section" id="resultsSection" style="display: none;">
                    <div class="results-header">
                        <h2><i class="fas fa-list"></i> Resultados</h2>
                        <span class="results-count" id="resultsCount">0 bombas</span>
                    </div>
                    <div class="results-grid" id="resultsGrid">
                        <!-- Los resultados se insertarán aquí -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>Bombas Bloch</h4>
                    <p>Fabricantes de sistemas de bombeo desde 1915.</p>
                    <div class="footer-social">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Navegación</h4>
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="productos.html">Productos</a></li>
                        <li><a href="servicios.html">Servicios</a></li>
                        <li><a href="contacto.html">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="aviso-legal.html">Aviso Legal</a></li>
                        <li><a href="politica-privacidad.html">Política de Privacidad</a></li>
                        <li><a href="politica-cookies.html">Política de Cookies</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contacto</h4>
                    <p><i class="fas fa-phone"></i> <a href="tel:+34961402144">961 402 144</a></p>
                    <p><i class="fas fa-envelope"></i> <a href="mailto:info@bombasbloch.com">info@bombasbloch.com</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Bombas Bloch. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="bips.js"></script>
    <script>
        document.getElementById('bipsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const caudal = parseFloat(document.getElementById('caudal').value);
            const altura = parseFloat(document.getElementById('altura').value);
            const categoria = document.getElementById('categoria').value;
            const mostrarAproximados = document.getElementById('aproximados').checked;
            
            let resultados;
            
            if (mostrarAproximados) {
                resultados = buscarBombaAproximada(caudal, altura);
            } else {
                resultados = buscarBomba(caudal, altura);
            }
            
            // Filtrar por categoría si se ha seleccionado
            if (categoria) {
                resultados = resultados.filter(b => b.categoria === categoria);
            }
            
            mostrarResultados(resultados, caudal, altura);
        });
        
        function mostrarResultados(resultados, caudalBuscado, alturaBuscada) {
            const section = document.getElementById('resultsSection');
            const grid = document.getElementById('resultsGrid');
            const count = document.getElementById('resultsCount');
            
            section.style.display = 'block';
            count.textContent = resultados.length + ' bomba' + (resultados.length !== 1 ? 's' : '');
            
            if (resultados.length === 0) {
                grid.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search"></i>
                        <h3>No se encontraron resultados</h3>
                        <p>Prueba a modificar los parámetros de búsqueda o activa la opción de resultados aproximados.</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = resultados.map(bomba => {
                const esAproximado = bomba.distancia !== undefined;
                const iconClass = getIconForCategory(bomba.categoria);
                
                return `
                    <div class="result-card ${esAproximado ? 'aproximado' : ''}">
                        <div class="result-icon">
                            <i class="${iconClass}"></i>
                        </div>
                        <div class="result-info">
                            <h3>
                                ${bomba.modelo}
                                ${esAproximado ? '<span class="aprox-badge">Aproximado</span>' : ''}
                            </h3>
                            <div class="serie">Serie ${bomba.serie} - ${bomba.categoria}</div>
                            <div class="specs">
                                <span><i class="fas fa-tint"></i> ${bomba.caudal} m³/h</span>
                                <span><i class="fas fa-arrows-alt-v"></i> ${bomba.altura} m</span>
                                <span><i class="fas fa-bolt"></i> ${bomba.potencia} kW</span>
                            </div>
                            <div class="aplicacion">${bomba.aplicacion}</div>
                        </div>
                        <div class="result-actions">
                            <button class="btn-info" onclick="verInfo('${bomba.modelo}')">
                                <i class="fas fa-info-circle"></i> Info
                            </button>
                            <button class="btn-quote" onclick="solicitarPresupuesto('${bomba.modelo}')">
                                <i class="fas fa-file-invoice"></i> Presupuesto
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Scroll suave a resultados
            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function getIconForCategory(categoria) {
            const icons = {
                'Horizontales Domésticas': 'fas fa-arrows-alt-h',
                'Horizontales Industriales': 'fas fa-industry',
                'Verticales de Superficie': 'fas fa-arrows-alt-v',
                'Sumergibles para Pozos': 'fas fa-water',
                'Sumergibles para Achique': 'fas fa-tint',
                'Sistemas Solar': 'fas fa-solar-panel',
                'Equipos de Presión': 'fas fa-compress-arrows-alt',
                'Equipos Contra Incendios': 'fas fa-fire-extinguisher'
            };
            return icons[categoria] || 'fas fa-cog';
        }
        
        function verInfo(modelo) {
            alert('Información detallada de ' + modelo + '\n\nContacta con nosotros para más detalles técnicos:\nTel: 961 402 144\nEmail: info@bombasbloch.com');
        }
        
        function solicitarPresupuesto(modelo) {
            window.location.href = 'contacto.html?asunto=presupuesto&modelo=' + encodeURIComponent(modelo);
        }
    </script>
</body>
</html>
